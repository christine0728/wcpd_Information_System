<div class="col-12">  
        @foreach ($comps as $comp) 
        <div class="col-12">
            <div class="form-section">  
                <div class="col-12" >  
                    <p style="font-size: large;">Section A: <b style="font-size: large; color: black">Offense Data</b></p>
                </div>  

                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">6. Time/Day/Month/Year of Commission:</label>
                            <input type="date" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="datetime_commission" value="{{ $comp->date_reported }}" readonly>
                        </div> 
                    </div>
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">7. Place of Commission: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="place_commission" value="{{ $comp->place_of_commission }}" readonly>
                        </div> 
                    </div> 
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label for="exampleInputEmail1">8. Offenses Committed: </label>
                            <select class="form-control" name="offenses" multiple value="{{ $comp->offenses }}" readonly>
                                <option>Select offense</option>
                                <option>Offense 1</option>
                                <option>Offense 2</option>
                            </select>
                        </div> 
                    </div>
                </div>
            </div>

            <div class="form-section" style="margin-top: 3rem">
                <hr style="margin-top: -1rem">
                <div class="col-12">  
                    <p style="font-size: large;">Section B: <b style="font-size: large;">Victim's Data</b></p>
                </div> 
                <hr style="margin-top: -1rem">
                <div class="row">
                    <div class="col-3">
                        <div class="form-group">
                            <label for="exampleInputEmail1">9. Family name:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_familyname" value="{{ $comp->victim_family_name }}" readonly>
                        </div> 
                    </div>
                    <div class="col-3">
                        <div class="form-group">
                            <label for="exampleInputEmail1">First name:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_firstname" value="{{ $comp->victim_firstname }}" readonly>
                        </div> 
                    </div> 
                    <div class="col-3">
                        <div class="form-group">
                            <label for="exampleInputEmail1">Middle name:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_middlename" value="{{ $comp->victim_middlename }}" readonly>
                        </div> 
                    </div>
                    <div class="col-3">
                        <div class="form-group">
                            <label for="exampleInputEmail1">Aliases: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_aliases" value="{{ $comp->victim_aliases }}" readonly>
                        </div> 
                    </div> 
                </div>

                <div class="row">
                    <div class="col-2" >
                        <div class="form-group">
                            <label for="exampleInputEmail1">10. Sex: </label> 
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_aliases" value="{{ $comp->victim_sex }}" readonly>
                        </div> 
                    </div> 
                    <div class="col-2" >
                        <div class="form-group">
                            <label for="exampleInputEmail1">11. Date of birth: </label>
                            <input type="date" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_date_birth" value="{{ $comp->victim_date_of_birth }}" readonly>
                        </div> 
                    </div> 
                    <div class="col-8" >
                        <div class="form-group">
                            <label for="exampleInputEmail1">12. Place of birth: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_place_birth" value="{{ $comp->victim_place_of_birth }}" readonly>
                        </div> 
                    </div> 
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">13. Highest Educational Attainment: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_date_birth" value="{{ $comp->victim_highest_educ_attainment }}" readonly> 
                        </div> 
                    </div>
                    <div class="col-3">
                        <div class="form-group">
                            <label for="exampleInputEmail1">14. Civil Status: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_date_birth" value="{{ $comp->victim_civil_status }}" readonly>  
                        </div> 
                    </div> 
                    <div class="col-3">
                        <div class="form-group">
                            <label for="exampleInputEmail1">15. Citizenship: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_citizenship" value="{{ $comp->victim_nationality }}" readonly>
                        </div> 
                    </div> 
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label for="exampleInputEmail1">16. Present Address: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_present_addr" value="{{ $comp->victim_present_address }}" readonly>
                        </div> 
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label for="exampleInputEmail1">17. Provincial Address: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_prov_addr" value="{{ $comp->victim_provincial_address }}" readonly>
                        </div> 
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label for="exampleInputEmail1">18. Parents/Guardian Name: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_parentsname" value="{{ $comp->victim_parents_guardian_name }}" readonly>
                        </div> 
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">19. Employment Information - Occupation: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_occupation" value="{{ $comp->victim_employment_info_occupation }}" readonly>
                        </div> 
                    </div>
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">20. Identifying Documents Presented: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="docs_presented" value="{{ $comp->victim_docs_presented }}" readonly>
                        </div> 
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label for="exampleInputEmail1">21.Contact Person, Address, and Contact Number:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="vic_contactperson" value="{{ $comp->victim_contactperson_addr_con_num }}" readonly>
                        </div> 
                    </div>
                </div>
            </div>

            <div class="form-section" style="margin-top: 3rem">
                <hr style="margin-top: -1rem">
                <div class="col-12">  
                    <p style="font-size: large;">Section C: <b style="font-size: large;">Offender's Data</b></p>
                </div> 
                <hr style="margin-top: -1rem">
                <div class="row">
                    <div class="col-3">
                        <div class="form-group">
                            <label for="exampleInputEmail1">22. Family name:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_familyname" value="{{ $comp->offender_family_name }}" readonly>
                        </div> 
                    </div>
                    <div class="col-3">
                        <div class="form-group">
                            <label for="exampleInputEmail1">First name:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_firstname"value="{{ $comp->offender_firstname }}" readonly>
                        </div> 
                    </div>
                    <div class="col-3">
                        <div class="form-group">
                            <label for="exampleInputEmail1">Middle name:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_middlename"value="{{ $comp->offender_middlename }}" readonly>
                        </div> 
                    </div>
                    <div class="col-3">
                        <div class="form-group">
                            <label for="exampleInputEmail1">Aliases:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_aliases"value="{{ $comp->offender_aliases }}" readonly>
                        </div> 
                    </div>
                </div>

                <div class="row">
                    <div class="col-4">
                        <div class="form-group">
                            <label for="exampleInputEmail1">23. Sex: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_aliases"value="{{ $comp->offender_sex }}" readonly> 
                        </div> 
                    </div>
                    <div class="col-4">
                        <div class="form-group">
                            <label for="exampleInputEmail1">24. Date of birth:</label>
                            <input type="date" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_date_birth"value="{{ $comp->offender_date_of_birth }}" readonly>
                        </div> 
                    </div>
                    <div class="col-4">
                        <div class="form-group">
                            <label for="exampleInputEmail1">25. Civil Status: </label>
                            <input type="date" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_date_birth"value="{{ $comp->offender_civil_status }}" readonly> 
                        </div> 
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">26. Highest Educational Attainment: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_date_birth"value="{{ $comp->offender_highest_educ_attainment }}" readonly> 
                            <div id="div2" style="margin-top: 1rem"></div>
                        </div> 
                    </div> 
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">27. Nationality: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_nationality"value="{{ $comp->offender_nationality }}" readonly>
                        </div> 
                    </div>
                </div>

                <div class="row">
                    <div class="col-5">
                        <label class="form-check-label" for="flexRadioDefault1">
                            28. Previous Criminal Record:
                        </label>
                        
                        <div style="display: flex">
                            <div class="form-check" style="margin-right: 2rem; margin-left: 2rem">
                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                                <label class="form-check-label" for="flexRadioDefault1">
                                Yes
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                                <label class="form-check-label" for="flexRadioDefault2">
                                No
                                </label>
                            </div>
                        </div> 
                    </div>
                    <div class="col-7">
                        <div class="form-group">
                            <label for="exampleInputEmail1">Pls. specify:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="crim_rec_specify"value="{{ $comp->offender_prev_criminal_rec }}" readonly>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">29. Employment Information - Occupation:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_occupation"value="{{ $comp->offender_employment_info_occupation }}" readonly>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">30. Last Known Address:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="off_last_addr"value="{{ $comp->offender_last_known_addr }}" readonly>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">31. Relationship to Victim:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="rel_to_victim"value="{{ $comp->offender_relationship_victim }}" readonly>
                        </div>
                    </div> 
                </div>
            </div>

            {{-- EVIDENCE DATA --}}
            <div class="form-section" style="margin-top: 3rem">
                <hr style="margin-top: -1rem">
                <div class="col-12">  
                    <p style="font-size: large;">Section D: <b style="font-size: large;">Evidence Data</b></p>
                </div> 
                <hr style="margin-top: -1rem">
                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">34. Motive/Cause: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="rel_to_victim"value="{{ $comp->evidence_motive_cause }}" readonly> 
                        </div> 
                    </div>

                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">35. Suspect under the influence of: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="rel_to_victim"value="{{ $comp->evidence_influence_of }}" readonly> 
                        </div> 
                    </div>
                </div>
            </div>

            {{-- CASE DISPOSITION --}}
            <div class="form-section" style="margin-top: 3rem">
                <hr style="margin-top: -1rem">
                <div class="col-12">  
                    <p style="font-size: large;">Section F: <b style="font-size: large;">Case Disposition</b></p>
                </div> 
                <hr style="margin-top: -1rem">
                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">47. Disposition: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="rel_to_victim"value="{{ $comp->case_disposition }}" readonly> 
                        </div> 
                    </div>

                    <div class="col-6">
                        <div class="form-group">
                            <label for="exampleInputEmail1">48. Suspect disposition: </label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="rel_to_victim"value="{{ $comp->suspect_disposition }}" readonly> 
                        </div> 
                    </div> 
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label for="exampleInputEmail1">Investigator on case:</label>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="investigator" value="{{ $comp->investigator_on_case }}" readonly>
                        </div>
                    </div> 
                </div>
            </div>  
        </div>
        @endforeach  
    </div>



        // dd('done');
        
        // $comp_report->save();

        // $comp_report = new ComplaintReport();

        // $vic_date_birth = $request->input('vic_date_birth');

        // $vic_age = Carbon::parse($vic_date_birth)->diffInYears(Carbon::now());

        // $off_date_birth = $request->input('off_date_birth');
        // $off_age = Carbon::parse($off_date_birth)->diffInYears(Carbon::now());
        // // dd($off_age);

        // $offenses = $request->input('offenses');

        // $serializedoffense = implode(', ', $offenses);

        // $v_educ_attain = $request->input('vic_educ_attainment');

        // if ($v_educ_attain == "Others"){
        //     $v_educ_attain = $request->input('others');
        // }
        // else {
        //     $v_educ_attain = $request->input('vic_educ_attainment');
        // }

        // $o_educ_attain = $request->input('off_educ_attainment');
        // if ($o_educ_attain == "Others2"){
        //     $o_educ_attain = $request->input('others2');
        // }
        // else {
        //     $o_educ_attain = $request->input('off_educ_attainment');
        // }

        // $influence = $request->input('influences');
        // if ($influence == "Others3"){
        //     $influence = $request->input('others3');
        // }
        // else {
        //     $influence = $request->input('influences');
        // }

        // $dispo = $request->input('disposition');
        // if ($dispo == "Others4"){
        //     $dispo = $request->input('others4');
        // }
        // else {
        //     $dispo = $request->input('disposition');
        // }

        // $sus_dispo = $request->input('sus_disposition');
        // if ($sus_dispo == "Others5"){
        //     $sus_dispo = $request->input('others5');
        // }
        // else {
        //     $sus_dispo = $request->input('sus_disposition');
        // }

        // $comp_report->complaint_report_author = $currentUserId; 
        // $comp_report->date_reported = $request->input('datetime_commission');
        // $comp_report->place_of_commission = $request->input('place_commission');
        // $sanitizedInput = Str::of($request->input('place_commission'))->trim()->stripTags();
        // dd($sanitizedInput);
        // $comp_report->offenses = $serializedoffense; 
        // $comp_report->victim_firstname = $request->input('vic_firstname');
        // $comp_report->victim_family_name = $request->input('vic_familyname');
        // $comp_report->victim_middlename = $request->input('vic_middlename');
        // $comp_report->victim_aliases = $request->input('vic_aliases');
        // $comp_report->victim_sex = $request->input('vic_gender');

        // $comp_report->victim_age = $vic_age;

        // $comp_report->victim_date_of_birth = $request->input('vic_date_birth');
        // $comp_report->victim_place_of_birth = $request->input('vic_place_birth');$comp_report->victim_highest_educ_attainment = $v_educ_attain; 
        // $comp_report->victim_civil_status = $request->input('vic_civil_stat');
        // $comp_report->victim_nationality = $request->input('vic_citizenship');
        // $comp_report->victim_present_address = $request->input('vic_present_addr');
        // $comp_report->victim_provincial_address = $request->input('vic_prov_addr');
        // $comp_report->victim_parents_guardian_name = $request->input('vic_parentsname');
        // $comp_report->victim_employment_info_occupation = $request->input('vic_occupation');
        // $comp_report->victim_docs_presented = $request->input('docs_presented');
        // $comp_report->victim_contactperson_addr_con_num = $request->input('vic_contactperson');
        // $comp_report->offender_firstname = $request->input('off_firstname');
        // $comp_report->offender_family_name = $request->input('off_familyname');
        // $comp_report->offender_middlename = $request->input('off_middlename');
        // $comp_report->offender_aliases = $request->input('off_aliases');
        // $comp_report->offender_sex = $request->input('off_gender');
        // $comp_report->offender_age = $off_age;
        // $comp_report->offender_date_of_birth = $request->input('off_date_birth');
        // $comp_report->offender_civil_status = $request->input('off_civil_stat');
        // $comp_report->offender_highest_educ_attainment = $o_educ_attain;
        // $comp_report->offender_nationality = $request->input('off_nationality');
        // $comp_report->offender_prev_criminal_rec = $request->input('crim_rec_specify');
        // $comp_report->offender_employment_info_occupation = $request->input('off_occupation');
        // $comp_report->offender_last_known_addr = $request->input('off_last_addr');
        // $comp_report->offender_relationship_victim = $request->input('rel_to_victim');
        // $comp_report->evidence_motive_cause = $request->input('evi_motive');
        // $comp_report->evidence_influence_of = $influence;
        // $comp_report->case_disposition = $dispo;
        // $comp_report->suspect_disposition = $sus_dispo;
        // $comp_report->investigator_on_case = $request->input('investigator');
        // $comp_report->created_at = Carbon::now();
        // $comp_report->save();
        // return redirect()->back()->with('message', 'The record has been added successfully!');






<!-- Sidebar -->
<style> 
.sideber{
    position: fixed;
}
</style>
<div class="sidebar" style="position:fixed">
    <!-- Sidebar user panel (optional) -->
    <div class="user-panel mt-3 pb-3 mb-3 d-flex ">
        <div class="info">
            <a class="d-block">
                <img src="{{ asset('images/default.png') }}" alt="Default Image" class="img-thumbnail" style="max-width: 50px; max-height: 50px;">
                {{ Auth::guard('account')->user()->firstname }} {{ Auth::guard('account')->user()->lastname }}
            </a>
        </div>
    </div>

    <!-- Sidebar Menu -->
    <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
            @if (Auth::guard('account')->user()->acc_type == 'superadmin')
                <li class="nav-item"> 
                    <a href="{{ route('superadmin.dashboard') }}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                        <i class="nav-icon fas fa-th"></i>
                        <p>
                            {{ __('Dashboard') }}
                        </p>
                    </a>
                </li>

            @elseif (Auth::guard('account')->user()->acc_type == 'investigator' )<li class="nav-item">
                <a href="{{ route('investigator.dashboard') }}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                    <i class="nav-icon fas fa-th"></i>
                    <p>
                        {{ __('Dashboard') }}
                    </p>
                </a>
            </li> 
            @endif

            @if (Auth::guard('account')->user()->acc_type == 'superadmin')
                <li class="nav-item"> 
                    <a href="{{ route('superadmin.allrecords')}}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                        <i class="nav-icon fas fa-th"></i>
                        <p>
                            {{ __('All Records') }}
                        </p>
                    </a>
                </li>

            @elseif (Auth::guard('account')->user()->acc_type == 'investigator' )<li class="nav-item">
                <a href="{{ route('investigator.allrecords') }}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                    <i class="nav-icon fas fa-th"></i>
                    <p>
                        {{ __('All Records') }}
                    </p>
                </a>
            </li> 
            @endif
            {{-- <li class="nav-item">
                <a href="#" class="nav-link">
                    <i class="nav-icon fas fa-cogs"></i> <!-- Updated icon for Administration -->
                    <p>
                        {{ __('All Records') }}
                        <i class="fas fa-angle-left right"></i>
                    </p>
                </a>
                <ul class="nav nav-treeview" style="display: none;">
                    <li class="nav-item">
                        <a href="" class="nav-link {{ request()->is('universityofficial') ? 'text-primary' : 'text-dark' }}">
                            <p>University Official</p>
                        </a>
                    </li>
                </ul>
                <ul class="nav nav-treeview" style="display: none;">
                    <li class="nav-item">
                        <a href="" class="nav-link {{ request()->is('organizationalstructure') ? 'text-primary' : 'text-dark' }}">
                            <p>Organizational Structure of Library</p>
                        </a>
                    </li>
                </ul>
                <ul class="nav nav-treeview" style="display: none;">
                    <li class="nav-item">
                        <a href="" class="nav-link {{ request()->is('libraryproceduralmanual') ? 'text-primary' : 'text-dark' }}">
                            <p>Library Procedural Manual</p>
                        </a>
                    </li>
                </ul>
                <ul class="nav nav-treeview" style="display: none;">
                    <li class="nav-item">
                        <a href=""  class="nav-link {{ request()->is('librarygoalmissionandobjective') ? 'text-primary' : 'text-dark' }}">
                            <p>Library Goal Mission and Objective</p>
                        </a>
                    </li>
                </ul>
            </li> --}}

            {{-- <li class="nav-item">
                <a href="{{ route('investigator.complaintreport')}}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                    <i class="nav-icon fas fa-th"></i>
                    <p>
                        {{ __('Complaint Report Management') }}
                    </p>
                </a>
            </li> --}}

            @if (Auth::guard('account')->user()->acc_type == 'superadmin')
                <li class="nav-item"> 
                    <a href="{{ route('investigator.complaintreport')}}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                        <i class="nav-icon fas fa-th"></i>
                        <p>
                            {{ __('Complaint Report Management') }}
                        </p>
                    </a>
                </li>

            @elseif (Auth::guard('account')->user()->acc_type == 'investigator' )<li class="nav-item">
                <a href="{{ route('investigator.complaintreport')}}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                    <i class="nav-icon fas fa-th"></i>
                    <p>
                        {{ __('Complaint Report Management') }}
                    </p>
                </a>
            </li> 
            @endif

            {{-- <li class="nav-item">
                <a href="{{ route('investigator.offensesmanagement')}}"  class="nav-link {{ request()->is('librarymanpower') ? 'text-primary' : 'text-dark' }}">
                    <i class="nav-icon far fa-address-card"></i>
                    <p>
                        {{ __('Update Types of Offenses') }}
                    </p>
                </a>
            </li> --}}

            @if (Auth::guard('account')->user()->acc_type == 'superadmin')
                <li class="nav-item"> 
                    <a href="{{ route('superadmin.offensesmanagement') }}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                        <i class="nav-icon fas fa-th"></i>
                        <p>
                            {{ __('Update Types of Offenses') }}
                        </p>
                    </a>
                </li>

            @elseif (Auth::guard('account')->user()->acc_type == 'investigator' )<li class="nav-item">
                <a href="{{ route('investigator.offensesmanagement') }}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                    <i class="nav-icon fas fa-th"></i>
                    <p>
                        {{ __('Update Types of Offenses') }}
                    </p>
                </a>
            </li> 
            @endif

            @if (Auth::guard('account')->user()->acc_type == 'superadmin')
                <li class="nav-item"> 
                    <a href="{{ route('superadmin.victims_mngt') }}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                        <i class="nav-icon fas fa-th"></i>
                        <p>
                            {{ __('Victims Management') }}
                        </p>
                    </a>
                </li>

            @elseif (Auth::guard('account')->user()->acc_type == 'investigator' )<li class="nav-item">
                <a href="{{ route('investigator.victims_mngt') }}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                    <i class="nav-icon fas fa-th"></i>
                    <p>
                        {{ __('Victims Management') }}
                    </p>
                </a>
            </li> 
            @endif

            @if (Auth::guard('account')->user()->acc_type == 'superadmin')
                <li class="nav-item"> 
                    <a href="{{ route('superadmin.suspects_mngt') }}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                        <i class="nav-icon fas fa-th"></i>
                        <p>
                            {{ __('Offenders Management') }}
                        </p>
                    </a>
                </li>

            @elseif (Auth::guard('account')->user()->acc_type == 'investigator' )<li class="nav-item">
                <a href="{{ route('investigator.suspects_mngt') }}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                    <i class="nav-icon fas fa-th"></i>
                    <p>
                        {{ __('Offenders Management') }}
                    </p>
                </a>
            </li> 
            @endif 

            @if (Auth::guard('account')->user()->acc_type == 'superadmin')
                <li class="nav-item">
                    <a href="" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                        <i class="nav-icon fas fa-th"></i>
                        <p>
                            {{ __('Account Management') }}
                            <i class="fas fa-angle-left right"></i>
                        </p>
                    </a>

                    <ul class="nav nav-treeview" style="display: none;">

                        <li class="nav-item">
                            <a href="{{ route('superadmin.inv_account_mngt') }}"  class="nav-link {{ request()->is('filipiniana') ? 'text-primary' : 'text-dark' }}">
                                <p>Investigator Account Mngt.</p>
                            </a>
                        </li>
    
                        <li class="nav-item">
                            <a href="{{ route('superadmin.superadmin_account_mngt', Auth::guard('account')->user()->id) }}"  class="nav-link {{ request()->is('filipiniana') ? 'text-primary' : 'text-dark' }}">
                                <p>Super Admin Account Mngt.</p>
                            </a>
                        </li> 
                    </ul>
                </li>
            @elseif (Auth::guard('account')->user()->acc_type == 'investigator')
                <li class="nav-item">
                    <a href="{{ route('investigator.accountmngt') }}" class="nav-link {{ request()->is('home') ? 'text-primary' : 'text-dark' }}">
                        <i class="nav-icon fas fa-th"></i>
                        <p>
                            {{ __('Account Management') }}
                        </p>
                    </a>
                </li>
            @endif 
        </ul> 
    </nav>
    <!-- /.sidebar-menu -->
</div>
<!-- /.sidebar -->





<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>SuperAdmin | Dashboard</title>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
        <link rel="icon" href="{{ url('images/favicon.ico') }}">
        <link rel="stylesheet" href="{{ asset('css/fontawesome.min.css') }}">
        <link rel="stylesheet" href="{{ asset('css/styles.css') }}?version=24"> 

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script> 
        <script src="https://kit.fontawesome.com/7528702e77.js" crossorigin="anonymous"></script>
        <style>
            .filter {
                display: flex;
                align-items: center;
            }

            .date-filter {
                display: flex;
                align-items: center;
                margin-right: 10px;
            }

            .date-filter label {
                margin-right: 5px;
            }

            @media only screen and (max-width: 768px) {
                /* For mobile phones: */
                [class*="col-"] {
                width: 100%;
                }
                
                div{
                    display: none !important;
                }
            }

            .notif div:hover{
                background-color: #f0f0f0 !important;
                border-radius: 0.5rem !important;
            }
        </style>
    </head>
    <body>  
    @extends('layouts.app')

    @section('content')
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2"> 
                        <div class="col-6">
                        <h1 class="m-0" style="font-weight: bold;">&nbsp;{{ __('Dashboard') }}</h1>
                    </div> 
                </div>
            </div>
        </div>


        <div class="content" style="margin-top: 1rem; ">
            <div class="container-fluid" >   
                <div class="row col-12" style="overflow-x:auto; background-color: white; border-radius: 0.5rem; margin-top: -1.5rem; margin-bottom: 2rem; padding: 1rem">
                    <div class="col-12">
                        <div class="filter">
                            <form action="filter-allrecords" method="GET">
                            <div class="date-filter">
                                <label for="start_date">From:</label>&nbsp;&nbsp;
                                <input type="date" name="start_date" class="form-control" id="start_date" value="{{ $start_date ?? old('start_date') }}">&nbsp;&nbsp;
                                <label for="end_date">To:</label>&nbsp;&nbsp;
                                <input type="date" class="form-control" name="end_date" id="end_date" value="{{ $end_date ?? old('end_date') }}">&nbsp;&nbsp;
                                <button type="submit" class="form-buttons" style="width: 20rem">Apply Filter</button>&nbsp;&nbsp;
                                <a href="{{ route('superadmin.allrecords') }}"><button type="button" class="link-buttons" style="background-color: #48145B">All</button></a>
                            </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">  
                                <div id="chart_div" style="width: 100%; height: 15rem;"></div>

                                <button id="download-button" class="form-buttons" style="width: 13rem; margin-top: 1rem">Download Monthly Data&nbsp;&nbsp;<i class="fa-solid fa-download"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large"> TOTAL NUMBER OF RECORDS PER RELATIONSHIP OF VICTIM TO SUSPECT PER GENDER </b>
                                </div>
                                <table id="compsTbl">
                                    <thead>
                                        <tr>
                                            <th>RELATIONSHIP </th>
                                            <th>Male Count</th>
                                            <th>Female Count</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach($relationshipCounts as $item)
                                            <tr>
                                                <td>{{ $item->offender_relationship_victim }}</td>
                                                <td>{{ $item->male_count }}</td>
                                                <td>{{ $item->female_count }}</td>
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                        
                    {{-- <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto; background-color: white; border-radius: 0.5rem; ">  
                                <table id="example" class="display responsive nowrap mt-5 table-responsive-sm">
                                    <thead> 
                                        <tr> 
                                            <th>Case</th>
                                            @foreach($comps as $comp) 
                                                <th>{{ $comp->comp_month }}</th> 
                                            @endforeach
                                        </tr>
                                    </thead>
                                    <tbody>  
                                        @foreach($comps as $comp)
                                            <tr>
                                                <td>
                                                    {{ $comp->offense }}
                                                </td> 
                                                @foreach($comps as $comp) 
                                                <td>Male: {{ $comp->male_total_comps }} 
                                                    <br>Female: {{ $comp->female_total_comps }}</td> 
                                                @endforeach 
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table> 
                            </div>
                        </div>
                    </div> --}}

                    <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large">TOTAL NUMBER OF CASES PER AGE RANGE IN FEMALE</b>
                                </div>
                                <br><div class="pie-chart_fem" id="pie-chart_fem"></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large">TOTAL NUMBER OF CASES PER AGE RANGE IN MALE</b>
                                </div>
                                <br><div class="pie-chart_male" id="pie-chart_male"></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large">TOTAL NUMBER OF VICTIMS PER GENDER</b>
                                </div>
                                <br><div id="pie_chart" ></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large"> TOTAL NUMBER OF OFFENDERS PER GENDER</b>
                                </div>
                                <br><div id="pie_chart5"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large">TOP FIVE PLACES WITH MOST NUMBER OF CASE</b>
                                </div>
                                <div id="chart_div1" ></div>
                            </div>
                        </div>
                    </div>


                    {{-- <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large"> TOTAL NUMBER OF RECORDS PER RELATIONSHIP OF VICTIM TO SUSPECT PER GENDER </b>
                                </div>
                                <table id="compsTbl">
                                    <thead>
                                        <tr>
                                            <th>RELATIONSHIP </th>
                                            <th>Male Count</th>
                                            <th>Female Count</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach($relationshipCounts as $item)
                                            <tr>
                                                <td>{{ $item->offender_relationship_victim }}</td>
                                                <td>{{ $item->male_count }}</td>
                                                <td>{{ $item->female_count }}</td>
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div> --}}
                   
                    <div class="card-footer clearfix"> 
                    </div>
                </div>
            </div>
        </div> 
    @endsection
    </body>
</html> 

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> 
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script> 

$(document).ready(function() {
          $('#compsTbl').DataTable({
            "order": [[0, "desc"]]
          });
      });

  
</script>
<script>
    google.charts.load('current', {'packages':['bar']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Month', 'Male', 'Female'], 
            @foreach($comps as $comp)
                ['{{ $comp->comp_month }}', 
                {{ $comp->male_total_comps ?? 0 }}, 
                {{ $comp->female_total_comps ?? 0 }}
                ],
            @endforeach
        ]);

        var options = {
            chart: {
                title: 'Total Cases per Month per Gender',
                subtitle: 'Grouped by Month and Gender',
            },
            bars: 'vertical' // Ensuring vertical bars
        };

        var chart = new google.charts.Bar(document.getElementById('chart_div'));

        chart.draw(data, google.charts.Bar.convertOptions(options)); 
        
        // Function to download chart data as CSV
        function downloadCSV() {
            var csvContent = google.visualization.dataTableToCsv(data);
            var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + csvContent);
            var link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'chart_data.csv');
            document.body.appendChild(link);
            link.click();
        }

        // Add event listener to the download button
        document.getElementById('download-button').addEventListener('click', function() {
            downloadCSV();
        });
    }
</script>

<script type="text/javascript">
    google.charts.load('current', {'packages': ['corechart']});
    google.charts.setOnLoadCallback(drawChart3);

    function drawChart3() {
        var data3 = new google.visualization.DataTable();
        data3.addColumn('string', 'Age Range');
        data3.addColumn('number', 'Total Complaints'); 

        var rawData = {!! json_encode($comps11) !!}; // Ensure proper JSON encoding

        rawData.forEach(function(row) {
            data3.addRow([row.age_range, row.total_comps]);
        });

        var options3 = {
            title: 'Complaints by Age Range',
            is3D: false,
            chartArea: {
                left: 50,
                right: 50,
                width: '100%',
                height: '100%'
            },
            fontSize: 20,
            legend: {
                position: 'left',
                fontSize: 17,
                textStyle: {
                    fontSize: 16
                }
            },
            pieSliceTextStyle: {
                fontSize: 15
            },  
        };

        var chart3 = new google.visualization.PieChart(document.getElementById('pie-chart_fem'));
        chart3.draw(data3, options3);

        var data_male = new google.visualization.DataTable();
        data_male.addColumn('string', 'Age Range');
        data_male.addColumn('number', 'Total Complaints'); 

        var rawDatam = {!! json_encode($comps_male) !!}; 

        rawDatam.forEach(function(row) {
            data_male.addRow([row.age_range, row.total_comps]);
        });

        var options_male = {
            title: 'Complaints by Age Range',
            is_3D: false,
            chartArea: {
                left: 50,
                right: 50,
                width: '100%',
                height: '100%'
            },
            fontSize: 20,
            legend: {
                position: 'left',
                fontSize: 17,
                textStyle: {
                    fontSize: 16
                }
            },
            pieSliceTextStyle: {
                fontSize: 15
            }, 
        };

        var chart_male = new google.visualization.PieChart(document.getElementById('pie-chart_male'));
        chart_male.draw(data_male, options_male);
    }  
</script>
{{-- <script>
    let inactiveTime = 0;
    const logoutTime = 5 * 60 * 1000;
    // 5 * 60 * 1000; // 5 minutes in milliseconds
    
    function resetInactiveTime() {
        inactiveTime = 0;
    }
    
    function handleUserActivity() {
        resetInactiveTime();
    }
    
    document.addEventListener('mousemove', handleUserActivity);
    document.addEventListener('keydown', handleUserActivity);
    
    function checkInactiveTime() {
        inactiveTime += 1000; 
        if (inactiveTime >= logoutTime) { 
            window.location.href = "/inactive_screen"; 
        } else { 
            setTimeout(checkInactiveTime, 1000); 
        }
    }
    
    setTimeout(checkInactiveTime, 1000); // Check every 1 second initially

</script> --}}
<script type="text/javascript">
     google.charts.load('current', {'packages':['bar']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Month', 'Male', 'Female'], 
            @foreach($comps as $comp)
                ['{{ $comp->comp_month }}', 
                {{ $comp->male_total_comps ?? 0 }}, 
                {{ $comp->female_total_comps ?? 0 }}
                ],
            @endforeach
        ]);

        var options = {
            chart: {
                title: 'Total Cases per Month',
                subtitle: 'Grouped by Month and Gender',
            },
            bars: 'vertical' // Ensuring vertical bars
        };

        var chart = new google.charts.Bar(document.getElementById('chart_div'));

        chart.draw(data, google.charts.Bar.convertOptions(options)); 
        
        // Function to download chart data as CSV
        function downloadCSV() {
            var csvContent = 'Month,Male,Female\n'; // Header line
            for (var i = 0; i < data.getNumberOfRows(); i++) {
                for (var j = 0; j < data.getNumberOfColumns(); j++) {
                    csvContent += data.getFormattedValue(i, j);
                    if (j < data.getNumberOfColumns() - 1) { 
                        csvContent += ',';
                    }
                }
                csvContent += '\n';
            }
            var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + csvContent);
            var link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'chart_data.csv');
            document.body.appendChild(link);
            link.click();
        }

        // Add event listener to the download button
        document.getElementById('download-button').addEventListener('click', function() {
            downloadCSV();
        });
    }
</script>

<script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Gender', 'Count'],
            ['Male', {{ $maleOffenders }}],
            ['Female', {{ $femaleOffenders }}]
        ]);

        var options = { 
            is3D: true,
        };

        var chart = new google.visualization.PieChart(document.getElementById('pie_chart5'));
        chart.draw(data, options);
    }
</script>

<script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Place');
        data.addColumn('number', 'Total Cases');
 
        var topPlaces = {!! json_encode($topPlaces) !!};
        var rows = [];
        topPlaces.forEach(function(place) {
            rows.push([place.place_of_commission, parseInt(place.total_cases)]);
        });

        data.addRows(rows);

        var options = { 
            legend: { position: 'none' },
            chartArea: { width: '50%' },
            hAxis: {
                title: 'Total Number Cases',
                minValue: 0, 
            },
            vAxis: {
                title: 'Place', 
            }
        };

        var chart = new google.visualization.BarChart(document.getElementById('chart_div1'));
        chart.draw(data, options);
    }
</script>




<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Investigator| Dashboard</title>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
        <link rel="icon" href="{{ url('images/favicon.ico') }}">
        <link rel="stylesheet" href="{{ asset('css/fontawesome.min.css') }}">
        <link rel="stylesheet" href="{{ asset('css/styles.css') }}?version=24"> 

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script> 
        <script src="https://kit.fontawesome.com/7528702e77.js" crossorigin="anonymous"></script>
        <style>
            .filter {
                display: flex;
                align-items: center;
            }

            .date-filter {
                display: flex;
                align-items: center;
                margin-right: 10px;
            }

            .date-filter label {
                margin-right: 5px;
            }

            @media only screen and (max-width: 768px) {
                /* For mobile phones: */
                [class*="col-"] {
                width: 100%;
                }
                
                div{
                    display: none !important;
                }
            }

            .notif div:hover{
                background-color: #f0f0f0 !important;
                border-radius: 0.5rem !important;
            }
        </style>
    </head>
    <body>  
    @extends('layouts.app')

    @section('content')
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2"> 
                        <div class="col-6">
                        <h1 class="m-0" style="font-weight: bold;">&nbsp;{{ __('Dashboard') }}</h1>
                    </div> 
                </div>
            </div>
        </div>


        <div class="content" style="margin-top: 1rem; ">
            <div class="container-fluid" >   
                <div class="row col-12" style="overflow-x:auto; background-color: white; border-radius: 0.5rem; margin-top: -1.5rem; margin-bottom: 2rem; padding: 1rem">
                    <div class="col-12">
                        <div class="filter">
                            <form action="filter-allrecords" method="GET">
                            <div class="date-filter">
                                <label for="start_date">From:</label>&nbsp;&nbsp;
                                <input type="date" name="start_date" class="form-control" id="start_date" value="{{ $start_date ?? old('start_date') }}">&nbsp;&nbsp;
                                <label for="end_date">To:</label>&nbsp;&nbsp;
                                <input type="date" class="form-control" name="end_date" id="end_date" value="{{ $end_date ?? old('end_date') }}">&nbsp;&nbsp;
                                <button type="submit" class="form-buttons" style="width: 20rem">Apply Filter</button>&nbsp;&nbsp;
                                <a href="{{ route('superadmin.allrecords') }}"><button type="button" class="link-buttons" style="background-color: #48145B">All</button></a>
                            </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">  
                                <div id="chart_div" style="width: 100%; height: 15rem;"></div>

                                <button id="download-button" class="form-buttons" style="width: 13rem; margin-top: 1rem">Download Monthly Data&nbsp;&nbsp;<i class="fa-solid fa-download"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large"> TOTAL NUMBER OF RECORDS PER RELATIONSHIP OF VICTIM TO SUSPECT PER GENDER </b>
                                </div>
                                <table id="compsTbl">
                                    <thead>
                                        <tr>
                                            <th>RELATIONSHIP </th>
                                            <th>Male Count</th>
                                            <th>Female Count</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach($relationshipCounts as $item)
                                            <tr>
                                                <td>{{ $item->offender_relationship_victim }}</td>
                                                <td>{{ $item->male_count }}</td>
                                                <td>{{ $item->female_count }}</td>
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                        
                    {{-- <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto; background-color: white; border-radius: 0.5rem; ">  
                                <table id="example" class="display responsive nowrap mt-5 table-responsive-sm">
                                    <thead> 
                                        <tr> 
                                            <th>Case</th>
                                            @foreach($comps as $comp) 
                                                <th>{{ $comp->comp_month }}</th> 
                                            @endforeach
                                        </tr>
                                    </thead>
                                    <tbody>  
                                        @foreach($comps as $comp)
                                            <tr>
                                                <td>
                                                    {{ $comp->offense }}
                                                </td> 
                                                @foreach($comps as $comp) 
                                                <td>Male: {{ $comp->male_total_comps }} 
                                                    <br>Female: {{ $comp->female_total_comps }}</td> 
                                                @endforeach 
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table> 
                            </div>
                        </div>
                    </div> --}}

                    <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large">TOTAL NUMBER OF CASES PER AGE RANGE IN FEMALE</b>
                                </div>
                                <br><div class="pie-chart_fem" id="pie-chart_fem"></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large">TOTAL NUMBER OF CASES PER AGE RANGE IN MALE</b>
                                </div>
                                <br><div class="pie-chart_male" id="pie-chart_male"></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large">TOTAL NUMBER OF VICTIMS PER GENDER</b>
                                </div>
                                <br><div id="pie_chart" ></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large"> TOTAL NUMBER OF OFFENDERS PER GENDER</b>
                                </div>
                                <br><div id="pie_chart5"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large">TOP FIVE PLACES WITH MOST NUMBER OF CASE</b>
                                </div>
                                <div id="chart_div1" ></div>
                            </div>
                        </div>
                    </div>


                    {{-- <div class="col-6">
                        <div class="card">
                            <div class="card-body" style="overflow-x:auto;  border-radius: 0.5rem; "> 
                                <div>
                                    <b style="color: #48145B; font-size: large"> TOTAL NUMBER OF RECORDS PER RELATIONSHIP OF VICTIM TO SUSPECT PER GENDER </b>
                                </div>
                                <table id="compsTbl">
                                    <thead>
                                        <tr>
                                            <th>RELATIONSHIP </th>
                                            <th>Male Count</th>
                                            <th>Female Count</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach($relationshipCounts as $item)
                                            <tr>
                                                <td>{{ $item->offender_relationship_victim }}</td>
                                                <td>{{ $item->male_count }}</td>
                                                <td>{{ $item->female_count }}</td>
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div> --}}
                   
                    <div class="card-footer clearfix"> 
                    </div>
                </div>
            </div>
        </div> 
    @endsection
    </body>
</html> 

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> 
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script> 

$(document).ready(function() {
          $('#compsTbl').DataTable({
            "order": [[0, "desc"]]
          });
      });

  
</script>

<script type="text/javascript">
     google.charts.load('current', {'packages':['bar']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Month', 'Male', 'Female'], 
            @foreach($comps as $comp)
                ['{{ $comp->comp_month }}', 
                {{ $comp->male_total_comps ?? 0 }}, 
                {{ $comp->female_total_comps ?? 0 }}
                ],
            @endforeach
        ]);

        var options = {
            chart: {
                title: 'Total Cases per Month',
                subtitle: 'Grouped by Month and Gender',
            },
            bars: 'vertical' // Ensuring vertical bars
        };

        var chart = new google.charts.Bar(document.getElementById('chart_div'));

        chart.draw(data, google.charts.Bar.convertOptions(options)); 
        
        // Function to download chart data as CSV
        function downloadCSV() {
            var csvContent = 'Month,Male,Female\n'; // Header line
            for (var i = 0; i < data.getNumberOfRows(); i++) {
                for (var j = 0; j < data.getNumberOfColumns(); j++) {
                    csvContent += data.getFormattedValue(i, j);
                    if (j < data.getNumberOfColumns() - 1) { 
                        csvContent += ',';
                    }
                }
                csvContent += '\n';
            }
            var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + csvContent);
            var link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'chart_data.csv');
            document.body.appendChild(link);
            link.click();
        }

        // Add event listener to the download button
        document.getElementById('download-button').addEventListener('click', function() {
            downloadCSV();
        });
    }
</script>
<script type="text/javascript">
    google.charts.load('current', {'packages': ['corechart']});
    google.charts.setOnLoadCallback(drawChart3);

    function drawChart3() {
        var data3 = new google.visualization.DataTable();
        data3.addColumn('string', 'Age Range');
        data3.addColumn('number', 'Total Complaints'); 

        var rawData = {!! json_encode($comps11) !!}; // Ensure proper JSON encoding

        rawData.forEach(function(row) {
            data3.addRow([row.age_range, row.total_comps]);
        });

        var options3 = {
            title: 'Complaints by Age Range',
            is3D: false,
            chartArea: {
                left: 50,
                right: 50,
                width: '100%',
                height: '100%'
            },
            fontSize: 20,
            legend: {
                position: 'left',
                fontSize: 17,
                textStyle: {
                    fontSize: 16
                }
            },
            pieSliceTextStyle: {
                fontSize: 15
            },  
        };

        var chart3 = new google.visualization.PieChart(document.getElementById('pie-chart_fem'));
        chart3.draw(data3, options3);

        var data_male = new google.visualization.DataTable();
        data_male.addColumn('string', 'Age Range');
        data_male.addColumn('number', 'Total Complaints'); 

        var rawDatam = {!! json_encode($comps_male) !!}; 

        rawDatam.forEach(function(row) {
            data_male.addRow([row.age_range, row.total_comps]);
        });

        var options_male = {
            title: 'Complaints by Age Range',
            is_3D: false,
            chartArea: {
                left: 50,
                right: 50,
                width: '100%',
                height: '100%'
            },
            fontSize: 20,
            legend: {
                position: 'left',
                fontSize: 17,
                textStyle: {
                    fontSize: 16
                }
            },
            pieSliceTextStyle: {
                fontSize: 15
            }, 
        };

        var chart_male = new google.visualization.PieChart(document.getElementById('pie-chart_male'));
        chart_male.draw(data_male, options_male);
    }  
</script>
{{-- <script>
    let inactiveTime = 0;
    const logoutTime = 5 * 60 * 1000;
    // 5 * 60 * 1000; // 5 minutes in milliseconds
    
    function resetInactiveTime() {
        inactiveTime = 0;
    }
    
    function handleUserActivity() {
        resetInactiveTime();
    }
    
    document.addEventListener('mousemove', handleUserActivity);
    document.addEventListener('keydown', handleUserActivity);
    
    function checkInactiveTime() {
        inactiveTime += 1000; 
        if (inactiveTime >= logoutTime) { 
            window.location.href = "/inactive_screen"; 
        } else { 
            setTimeout(checkInactiveTime, 1000); 
        }
    }
    
    setTimeout(checkInactiveTime, 1000); // Check every 1 second initially

</script> --}}

<script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Gender', 'Count'],
            ['Male', {{ $maleOffenders }}],
            ['Female', {{ $femaleOffenders }}]
        ]);

        var options = { 
            is3D: true,
        };

        var chart = new google.visualization.PieChart(document.getElementById('pie_chart5'));
        chart.draw(data, options);
    }
</script>

<script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Place');
        data.addColumn('number', 'Total Cases');
 
        var topPlaces = {!! json_encode($topPlaces) !!};
        var rows = [];
        topPlaces.forEach(function(place) {
            rows.push([place.place_of_commission, parseInt(place.total_cases)]);
        });

        data.addRows(rows);

        var options = { 
            legend: { position: 'none' },
            chartArea: { width: '50%' },
            hAxis: {
                title: 'Total Number Cases',
                minValue: 0, 
            },
            vAxis: {
                title: 'Place', 
            }
        };

        var chart = new google.visualization.BarChart(document.getElementById('chart_div1'));
        chart.draw(data, options);
    }
</script>